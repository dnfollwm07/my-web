# 網絡模型

## 目錄
- [應用層](#應用層)
- [傳輸層](#傳輸層)
- [網絡層](#網絡層)
- [網絡接口層](#網絡接口層)
- [每層的數據封裝](#每層的數據封裝)


## 應用層
- 最上層用戶直接接觸到的，**電腦、手機的應用軟件**都實現在應用層上
- 只專注為用戶提供應用功能，不管傳輸，需要傳輸東西時，向下傳遞到傳輸層
- 如 HTTP、FTP、Telnet、DNS、SMTP等

## 傳輸層
- 處理應用層的數據包，但**不負責**從一個設備傳到另一個設備
- 有`TCP`和`UDP`，用哪個也跟應用層協議有關，如果應用層HTTP，則傳輸層TCP
> 1. **TCP**：
>    - 特性：可靠
>    - 功能：流量控制、超時重傳、擁塞控制
> 2. **UPD**：
>    - 特性：快速
- 如果應用層要傳輸的數據很大，在這裡會被分包（TCP段），一部分丟失就只要重發丟失的部分
- 設備接收到數據時，傳輸層要把數據包發給應用，需要用**端口號**區分出不同的應用
- Web服務器常用80端口，遠程登陸服務器22端口
- 瀏覽器中每個分頁都是獨立的進程，各自有臨時端口號

## 網絡層
- 設備之間要發送信息，需要通過各式各樣的路徑、節點選擇
- 常用的是`IP協議`：
  - 將傳輸層的**報文**作為**數據**部分，前面加上**IP包頭**（其中有IP地址標示目的地）組裝成**IP報文**
  - 如果IP報文大小超過MTU（以太网[^1]中一般为 1500 字节）就会再次进行分片
  - 有**尋址**、**路由**的能力，_尋址在導航，路由操作方向盤_
1. 尋址：傳輸到另一個設備需要找到目的地
   - `IPv4協議`：IP地址共32位，分成四段每段八位，整個IP地址分為：
     - 網絡號：標註地址屬於哪個**子網**
     - 主機號：標註子往下的某一個**主機**
2. 路由：網絡是由很多網關、路由器、交換機、其他網絡設備連接起來的，需要通過算法決定路徑
   - 根據下一個目的地選擇路徑

## 網絡接口層
- 網絡層生成**IP頭部**，網絡接口層生成**MAC頭部**，並封裝成**數據幀**發送
- MAC地址用於在以太網中判斷目的地，是以太網[^1]使用的頭部，可以通過ARP協議獲取對方MAC地址
- 為網絡層提供鏈路級別的傳輸服務，在以太網、WiFi等底層網絡上發送原始數據包，工作在**網卡**的層次

## 每層的數據封裝
- 每往下，逐步加了東西進去

| 層級 | 數據包 | 新增 |
|-------|-------|-------|
| 應用層（HTTP） | 消息/報文（message） | - |
| 傳輸層（TCP） | 段（segment） | TCP頭 |
| 網絡層（IP） | 包（packet） | IP頭 |
| 網絡接口層（IP） | 幀（frame） | MAC頭 |

[^1]: 以太網是一種**在局域網內將附近設備連接起來**允許通訊的技術，組成包含：電腦上的以太網接口、WiFi接口、以太網交換機、路由器上的千兆/萬兆以太網口、網線